
export const translations = {
    'zh-CN': {
        'app.title': 'åœ£åœ°å·¡ç¤¼è§’è‰²å®æ™¯åˆæˆå™¨',
        'header.title': 'åœ£åœ°å·¡ç¤¼è§’è‰²å®æ™¯åˆæˆå™¨',
        'tab.local': 'æœ¬åœ°æå–',
        'tab.ai': 'AI ç”Ÿæˆ (Nano Banana Pro ğŸŒ)',
        'label.margin': 'è¾¹æ¡†',
        'label.background': 'åº•è‰²',
        'btn.extract': 'æå–è§’è‰²',
        'label.scale': 'å¤§å°',
        'label.opacity': 'é€æ˜',
        'input.apikey.label': 'Google AI Studio API Key <a href="https://ai.google.dev/gemini-api/docs/pricing?hl=zh-cn#gemini-3-pro-image-preview" target="_blank">ï¼ˆç”Ÿæˆä¸€å¼ å›¾ç‰‡çº¦$0.24ç¾å…ƒï¼‰</a>',
        'input.apikey.placeholder': 'è¯·è¾“å…¥æ‚¨çš„ Google AI Studio API Key',
        'input.prompt.label': 'æç¤ºè¯ï¼ˆPromptï¼‰',
        'btn.start_ai': 'å¼€å§‹ AI ç”Ÿæˆ',
        'btn.save_comparison': 'ä¿å­˜å¯¹æ¯”å›¾ç‰‡',
        'btn.save_bg_only': 'ä»…ä¿å­˜å®æ™¯åˆæˆå›¾ç‰‡',
        'btn.save_char_only': 'ä»…ä¿å­˜æå–è§’è‰²',
        'btn.switch_to_ai': 'å¯¹ç»“æœä¸æ»¡æ„ï¼Ÿå°è¯• AI ç”Ÿæˆ',
        'btn.reset': 'é‡æ–°å¼€å§‹',
        'text.map_link': 'åœ¨åœ°å›¾ä¸­å¯»æ‰¾åœ£åœ°',
        'text.intro': 'å°†åŠ¨æ¼«è§’è‰²æ”¾ç½®åœ¨åœ£åœ°å·¡ç¤¼å®æ‹ç…§ç‰‡ä¸­ï¼',
        'text.disclaimer': 'æœ¬å·¥å…·ä»…ä¾›éå•†ä¸šç”¨é€”ï¼ŒåŠ¨ç”»æˆªå›¾ç‰ˆæƒå½’åˆ¶ä½œå§”å‘˜ä¼šæ‰€æœ‰ã€‚',
        'footer.credit': 'æœ¬é¡¹ç›®åŸºäºImage Mergeé¡¹ç›®å¼€å‘',
        'modal.confirm.title': 'ç¡®è®¤ç”Ÿæˆï¼Ÿ',
        'modal.confirm.desc': 'æ­¤åŠŸèƒ½éœ€è¦ä½¿ç”¨æ‚¨è‡ªå·±çš„ Google AI Studio API Key',
        'modal.confirm.warning': 'âš ï¸ ç”Ÿæˆä¸€å¼ å›¾ç‰‡çº¦éœ€èŠ±è´¹ $0.24 ç¾å…ƒ',
        'btn.cancel': 'å–æ¶ˆ',
        'btn.confirm': 'ç¡®è®¤ç”Ÿæˆ',
        'msg.upload_photo_first': 'è¯·å…ˆä¸Šä¼ å®æ‹ç…§ç‰‡',
        'msg.extract_char_first': 'è¯·å…ˆæå–åŠ¨æ¼«è§’è‰²',
        'msg.upload_anime_first': 'è¯·å…ˆä¸Šä¼ åŠ¨æ¼«æˆªå›¾',
        'msg.model_loading': 'åŠ è½½æ¨¡å‹ä¸­â€¦',
        'msg.model_loaded': 'æ¨¡å‹å·²åŠ è½½',
        'msg.extracting': 'æ­£åœ¨æå–è§’è‰²...',
        'msg.extract_success': 'âœ“ æå–æˆåŠŸï¼å¯æ‹–åŠ¨è°ƒæ•´ä½ç½®',
        'msg.extract_fail': 'âœ— æå–å¤±è´¥: ',
        'msg.ai_generating': 'AI ç”Ÿæˆä¸­â€¦',
        'msg.ai_requesting': 'æ­£åœ¨è¯·æ±‚ Gemini ç”Ÿæˆ...',
        'msg.ai_success': 'âœ“ ç”ŸæˆæˆåŠŸï¼',
        'msg.ai_fail': 'âœ— ç”Ÿæˆå¤±è´¥: ',
        'canvas.upload_photo': 'ç‚¹é€‰æˆ–æ‹–æ‹½ä¸Šä¼ ç…§ç‰‡',
        'canvas.upload_screenshot': 'ç‚¹é€‰æˆ–æ‹–æ‹½ä¸Šä¼ æˆªå›¾',
        'loading.generating': 'ç”Ÿæˆä¸­â€¦',
        'loading.loading': 'åŠ è½½ä¸­â€¦',
        'link.apikey': 'å¦‚ä½•è·å– API Key',
        'btn.lang_toggle': 'English'
    },
    'en-US': {
        'app.title': 'Anime Pilgrimage Character Compositor',
        'header.title': 'Anime Pilgrimage Character Compositor',
        'tab.local': 'Local Extract',
        'tab.ai': 'AI Generate (Nano Banana Pro ğŸŒ)',
        'label.margin': 'Border',
        'label.background': 'Bg Color',
        'btn.extract': 'Extract Character',
        'label.scale': 'Scale',
        'label.opacity': 'Opacity',
        'input.apikey.label': 'Google AI Studio API Key <a href="https://ai.google.dev/gemini-api/docs/pricing?hl=en#gemini-3-pro-image-preview" target="_blank">(~$0.24 per image)</a>',
        'input.apikey.placeholder': 'Enter your Google AI Studio API Key',
        'input.prompt.label': 'Prompt',
        'btn.start_ai': 'Start AI Generation',
        'btn.save_comparison': 'Save Pilgrimage Comparison',
        'btn.save_bg_only': 'Save Pilgrimage Composite Only',
        'btn.save_char_only': 'Save Character Only',
        'btn.switch_to_ai': 'Not satisfied? Try AI Generation',
        'btn.reset': 'Reset',
        'text.map_link': 'Find pilgrimage locations on map',
        'text.intro': 'Place anime characters into real pilgrimage photos!',
        'text.disclaimer': 'Non-commercial use only. All rights reserved by the Production Committee.',
        'footer.credit': 'Based on Image Merge project',
        'modal.confirm.title': 'Confirm Generation?',
        'modal.confirm.desc': 'This feature requires your own Google AI Studio API Key',
        'modal.confirm.warning': 'âš ï¸ Generating one image costs approximately $0.24 USD',
        'btn.cancel': 'Cancel',
        'btn.confirm': 'Confirm',
        'msg.upload_photo_first': 'Please upload a real photo first',
        'msg.extract_char_first': 'Please extract the anime character first',
        'msg.upload_anime_first': 'Please upload an anime screenshot first',
        'msg.model_loading': 'Loading model...',
        'msg.model_loaded': 'Model loaded',
        'msg.extracting': 'Extracting character...',
        'msg.extract_success': 'âœ“ Extraction successful! Drag to adjust position',
        'msg.extract_fail': 'âœ— Extraction failed: ',
        'msg.ai_generating': 'AI Generating...',
        'msg.ai_requesting': 'Requesting Gemini generation...',
        'msg.ai_success': 'âœ“ Generation successful!',
        'msg.ai_fail': 'âœ— Generation failed: ',
        'canvas.upload_photo': 'Click or drag to upload photo',
        'canvas.upload_screenshot': 'Click or drag to upload screenshot',
        'loading.generating': 'Generating...',
        'loading.loading': 'Loading...',
        'link.apikey': 'How to get API Key',
        'btn.lang_toggle': 'ä¸­æ–‡'
    }
};

let currentLang = 'zh-CN';

export const getLang = () => currentLang;

export const setLang = (lang) => {
    if (translations[lang]) {
        currentLang = lang;
        updatePageContent();
        localStorage.setItem('app_language', lang);
    }
};

export const t = (key) => {
    return translations[currentLang][key] || key;
};

export const updatePageContent = () => {
    document.documentElement.lang = currentLang;

    // Update all elements with data-i18n attribute
    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (translations[currentLang][key]) {
            if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
                if (el.getAttribute('placeholder')) {
                    el.setAttribute('placeholder', translations[currentLang][key]);
                }
            } else {
                el.innerHTML = translations[currentLang][key];
            }
        }
    });

    // Update specific attributes like placeholder if needed
    document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
        const key = el.getAttribute('data-i18n-placeholder');
        if (translations[currentLang][key]) {
            el.setAttribute('placeholder', translations[currentLang][key]);
        }
    });

    // Trigger custom event for canvas redraws or other JS updates
    window.dispatchEvent(new CustomEvent('languageChanged', { detail: { lang: currentLang } }));
};

// Initialize language from local storage or default
export const initI18n = () => {
    const savedLang = localStorage.getItem('app_language');
    if (savedLang && translations[savedLang]) {
        currentLang = savedLang;
    }
    updatePageContent();
};
